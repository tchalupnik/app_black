[project]
name = "boneio"
description = "Python App for BoneIO"
readme = "README.md"
dynamic = ["version"]
authors = [{ name = "PaweÅ‚ Szafer", email = "pszafer@gmail.com" }]
dependencies = [
  "Adafruit-Blinka==8.56.0",
  "adafruit-circuitpython-ds18x20==1.4.3",
  "adafruit-circuitpython-mcp230xx==2.5.16",
  "adafruit-circuitpython-mcp9808==3.3.26",
  "adafruit-circuitpython-pct2075==1.1.23",
  "aiomqtt==1.1.0",
  "Cerberus==1.3.7",
  "colorlog==6.9.0",
  "gpio==1.0.0",
  "luma-core==2.4.2",
  "luma-oled==3.13.0",
  "pymodbus==2.5.3",
  "pyserial-asyncio==0.6",
  "PyYAML==6.0.1",
  "psutil==7.0.0",
  "adafruit-circuitpython-onewire==2.0.9",
  "w1thermsensor[async]==2.3.0",
  "adafruit-circuitpython-pca9685==3.4.17",
  "adafruit-circuitpython-pcf8575==1.0.9",
  "adafruit-circuitpython-typing==1.9.5",
  "fastapi==0.103.2",
  "pydantic==2.5.3",
  "hypercorn==0.14.4",
  "websockets==11.0.3",
  "python-jose[cryptography]==3.3.0",
  "qrcode==7.4.2",
]
requires-python = ">=3.10"
license = { text = "GNU General Public License v3.0" }

[project.optional-dependencies]
beaglebone = [
  "adafruit-bbio @ git+https://github.com/tchalupnik/adafruit-beaglebone-io-python.git",
]
dev = [
  "ruff>=0.6.0",
  "ty>=0.0.1a20",
  "pre-commit>=3.8.0",
  "bandit>=1.7.5",
]

[project.urls]
Homepage = "https://boneio.eu"
Repository = "https://github.com/boneIO-eu/app_bbb"
Documentation = "https://boneio.eu/docs/intro/"
Changelog = "https://github.com/boneIO-eu/app_bbb/releases"

[project.scripts]
boneio = "boneio.bonecli:main"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.version]
path = "boneio/version.py"

[tool.hatch.metadata]
allow-direct-references = true

[tool.ruff]
target-version = "py310"
line-length = 88
exclude = [
    ".eggs",
    ".git",
    ".hg",
    ".mypy_cache",
    ".tox",
    ".venv",
    "_build",
    "buck-out",
    "build",
    "dist",
    "tests/fixtures",
]

[tool.ty.src]
include = ["boneio/"]

[tool.ty.rules]
unresolved-import = "ignore"

[tool.bandit]
exclude_dirs = ["tests"]
skips = ["B101", "B601"]
