type: dict
schema:
  action:
    type: string
    allowed: ['mqtt', 'output', 'cover']
    coerce: lower
    case_insensitive: true
  pin:
    type: string
    required_if:
      action: ['output', 'group', 'cover']
  topic:
    type: string
    required_if:
      action: ['mqtt']
    forbidden_if:
      action: ['output', 'cover']
    meta:
      label: If mqtt action then topic to send
  action_cover:
    type: string
    required_if:
      action: ['cover']
    forbidden_if:
      action: ['output', 'mqtt']
    allowed: ['TOGGLE', 'OPEN', 'CLOSE', 'STOP', 'TOGGLE_OPEN', 'TOGGLE_CLOSE']
    coerce: action_field
    default: TOGGLE
    case_insensitive: true
    meta:
      label: If cover action chosen then what action to perform.
  action_output:
    type: string
    required_if:
      action: ['output']
    forbidden_if:
      action: ['cover', 'mqtt']
    allowed: ['TOGGLE', 'ON', 'OFF']
    coerce: action_field
    default: TOGGLE
    case_insensitive: true
    meta:
      label: If output action chosen then what action to perform.
  action_mqtt_msg:
    type: string
    required_if:
      action: ['mqtt']
    forbidden_if:
      action: ['output', 'cover']
    meta:
      label: What message to send to mqtt topic
