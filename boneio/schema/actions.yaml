type: dict
schema:
  action:
    type: string
    allowed: ['mqtt', 'output', 'cover', 'output_over_mqtt', 'cover_over_mqtt']
    coerce: lower
    case_insensitive: true
  pin:
    type: string
    required_if:
      action: ['output', 'group', 'cover', 'output_over_mqtt', 'cover_over_mqtt']
  topic:
    type: string
    required_if:
      action: ['mqtt']
    forbidden_if:
      action: ['output', 'cover', 'mqtt_output', 'cover_over_mqtt']
    meta:
      label: If mqtt action then topic to send
  action_cover:
    type: string
    required_if:
      action: ['cover', 'cover_over_mqtt']
    forbidden_if:
      action: ['output', 'mqtt', 'mqtt_output']
    allowed: ['TOGGLE', 'OPEN', 'CLOSE', 'STOP', 'TOGGLE_OPEN', 'TOGGLE_CLOSE', 'TILT', 'TILT_OPEN', 'TILT_CLOSE']
    coerce: action_field
    default: TOGGLE
    case_insensitive: true
    meta:
      label: If cover action chosen then what action to perform.
  data:
    type: dict
    required: False
    default: {}
    meta:
      label: Extra data to send to function. Currently used only for cover tilt.
    schema:
      position:
        type: integer
        required: False
        meta:
          label: Position to set cover to
      tilt_position:
        type: integer
        required: False
        meta:
          label: Tilt position to set cover to. 0 means closed, 100 means opened.
  action_output:
    type: string
    required_if:
      action: ['output', 'output_over_mqtt']
    forbidden_if:
      action: ['cover', 'mqtt', 'cover_over_mqtt']
    allowed: ['TOGGLE', 'ON', 'OFF']
    coerce: action_field
    default: TOGGLE
    case_insensitive: true
    meta:
      label: If output action chosen then what action to perform.
  action_mqtt_msg:
    type: string
    required_if:
      action: ['mqtt', 'output_over_mqtt', 'cover_over_mqtt']
    forbidden_if:
      action: ['output', 'cover']
    meta:
      label: What message to send to mqtt topic
  boneio_id:
    type: string
    required_if:
      action: ['output_over_mqtt', 'cover_over_mqtt']
    forbidden_if:
      action: ['output', 'cover', 'mqtt']
    meta:
      label: boneIO id to perform action on. Use only with action type `output_over_mqtt` or `cover_over_mqtt`.
